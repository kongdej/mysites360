import{u as x,a as z}from"./use-ratio.d97804d4.js";import{c as Q,b as V,d as h,f as b,i as k,u as q,r as o,k as S,t as B,_ as $,n as l,p as c,B as D,F as _,E as I,q as t,s,Q as P,I as T,D as g,A as f,y as p,C as w,b4 as N,J as R}from"./index.13618ae8.js";import{Q as j}from"./QSpace.09136e96.js";import{Q as v}from"./QTooltip.e060e8af.js";import{Q as M}from"./QBar.c5f07be5.js";import{C as A}from"./ClosePopup.042961d7.js";import"./position-engine.65a8dbe2.js";var E=Q({name:"QVideo",props:{...x,src:{type:String,required:!0},title:String,fetchpriority:{type:String,default:"auto"},loading:{type:String,default:"eager"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin"}},setup(e){const a=z(e),d=V(()=>"q-video"+(e.ratio!==void 0?" q-video--responsive":""));return()=>h("div",{class:d.value,style:a.value},[h("iframe",{src:e.src,title:e.title,fetchpriority:e.fetchpriority,loading:e.loading,referrerpolicy:e.referrerpolicy,frameborder:"0",allowfullscreen:!0})])}}),F=b({name:"CCTVPage",setup(){const e=k("store"),a=q(),d=o(a.params.site),r=o({}),y=o(),C=u=>B.post("/getcctv",{data:{site_id:u}},{headers:{"Content-Type":"application/json",Authorization:e.state.token}}).then(m=>m.data.results);S(async()=>{r.value=await C(d.value),console.log("img",r.value),(()=>{for(let m=0;m<r.value.cameras.length;m++);})()});const i=o(!1),n=o(0);return{selectIndex:n,showDialog:u=>{i.value=!0,n.value=u,console.log("image",r.value.cameras[n.value].url)},dialog:i,maximizedToggle:o(!0),imgRef:y,images:r}}});const J={class:"row justify-center bg-grey-12 q-pt-xl"};function L(e,a,d,r,y,C){return l(),c(_,null,[D("div",J,[(l(!0),c(_,null,I(e.images.cameras,(i,n)=>(l(),c("div",{class:"col-12 col-md-5",key:n},[t(T,{class:"q-pa-md q-ma-xs"},{default:s(()=>[t(E,{title:i.name,ratio:16/9,src:i.url,autoplay:""},null,8,["title","src"])]),_:2},1024)]))),128))]),t(P,{modelValue:e.dialog,"onUpdate:modelValue":a[2]||(a[2]=i=>e.dialog=i),persistent:"",maximized:e.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},{default:s(()=>[t(T,{class:"bg-primary text-white"},{default:s(()=>[t(M,null,{default:s(()=>[t(j),t(g,{dense:"",flat:"",icon:"minimize",onClick:a[0]||(a[0]=i=>e.maximizedToggle=!1),disable:!e.maximizedToggle},{default:s(()=>[e.maximizedToggle?(l(),f(v,{key:0,class:"bg-white text-primary"},{default:s(()=>[p("Minimize")]),_:1})):w("",!0)]),_:1},8,["disable"]),t(g,{dense:"",flat:"",icon:"crop_square",onClick:a[1]||(a[1]=i=>e.maximizedToggle=!0),disable:e.maximizedToggle},{default:s(()=>[e.maximizedToggle?w("",!0):(l(),f(v,{key:0,class:"bg-white text-primary"},{default:s(()=>[p("Maximize")]),_:1}))]),_:1},8,["disable"]),N((l(),f(g,{dense:"",flat:"",icon:"close"},{default:s(()=>[t(v,{class:"bg-white text-primary"},{default:s(()=>[p("Close")]),_:1})]),_:1})),[[A]])]),_:1}),t(R,{class:"q-pt-none"})]),_:1})]),_:1},8,["modelValue","maximized"])],64)}var Z=$(F,[["render",L],["__scopeId","data-v-3f37acf6"]]);export{Z as default};
